{"version":3,"file":"js/922.40b02d08.js","mappings":"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","sources":["webpack://AheadShop/./src/views/FavoritePage.vue","webpack://AheadShop/./src/views/FavoritePage.vue?9edb"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"table-cus mt-5 mb-5\">\n      <h5\n        class=\"h5 bg-danger bg-gradient rounded-top p-3 text-white\"\n        style=\"--bs-bg-opacity: 0.5\"\n      >\n        我的收藏\n      </h5>\n      <div class=\"text-center p-5\" v-if=\"filterFavorite.length === 0\">\n        <p>目前沒有收藏商品喔</p>\n        <router-link to=\"/products\"\n          ><button\n            type=\"button\"\n            class=\"btn btn-danger w-25 text-white bg-gradient\"\n          >\n            前往逛逛\n          </button></router-link\n        >\n      </div>\n      <div class=\"px-4\" v-else>\n        <table class=\"w-100 mt-4\" ref=\"table\">\n          <thead class=\"thead border-bottom\">\n            <tr class=\"text-center\">\n              <th scope=\"col-2\"></th>\n              <th scope=\"col\" class=\"py-3\">商品資訊</th>\n              <th scope=\"col\">單件價格</th>\n              <th scope=\"col\"></th>\n              <!-- <th scope=\"col\">小計</th> -->\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              class=\"text-center\"\n              v-for=\"favorite in filterFavorite\"\n              :key=\"favorite.id\"\n            >\n              <td>\n                <i\n                  class=\"bi bi-trash text-secondary fs-6 pointer\"\n                  @click=\"deleteFavorite(favorite.id)\"\n                ></i>\n              </td>\n\n              <td class=\"p-3\">\n                <div class=\"d-md-flex d-block align-items-center\">\n                  <router-link :to=\"`/product/${favorite.id}`\" class=\"me-3\">\n                    <img\n                      :src=\"favorite.imageUrl\"\n                      :alt=\"favorite.title\"\n                      class=\"cart-img rounded-3 w-100\"\n                    />\n                  </router-link>\n                  <h6 class=\"mt-2 text-center\">{{ favorite.title }}</h6>\n                </div>\n              </td>\n\n              <td>\n                <p v-if=\"favorite.price === favorite.origin_price\">\n                  NT$ {{ favorite.price }}\n                </p>\n                <p v-else class=\"text-danger\">\n                  NT$ {{ favorite.price }} <br />\n                  <del class=\"text-secondary fs-7\"\n                    >NT$ {{ favorite.origin_price }}</del\n                  >\n                </p>\n              </td>\n\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-danger rounded-pill text-white ms-3\"\n                  @click=\"addToCart(favorite.id)\"\n                >\n                  <i class=\"bi bi-cart3 fs-5-5 rounded-circle\"></i> 加入購物車\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\nexport default {\n  data() {\n    return {\n      products: [],\n      favorite: []\n    }\n  },\n  // 從所有商品篩選出收藏商品\n  computed: {\n    filterFavorite() {\n      return this.products.filter((item) => {\n        return this.favorite.includes(item.id)\n      })\n    }\n  },\n\n  methods: {\n    // 從 localStorage 取出收藏商品\n    getFavorite() {\n      this.favorite = JSON.parse(localStorage.getItem('favorite')) || []\n      emitter.emit('add-favorite')\n    },\n    // 取得產品列表\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/products/all`\n\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products\n          this.getFavorite()\n        })\n        .catch((err) => {\n          alert(err.response.data)\n        })\n    },\n    // 加入購物車\n    addToCart(id, qty = 1) {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.$http\n        .post(url, { data: data })\n        .then(() => {\n          this.$swal.fire({\n            icon: 'success',\n            text: '成功加入購物車 ✿',\n            showConfirmButton: false,\n            timer: 1800\n          })\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          this.$swal.fire({\n            icon: 'warning',\n            text: err.response.data.message,\n            showConfirmButton: false,\n            timer: 1800\n          })\n        })\n    },\n    // 刪除收藏\n    deleteFavorite(id) {\n      this.favorite.splice(this.favorite.indexOf(id), 1)\n      this.$swal.fire({\n        icon: 'success',\n        text: '已刪除此收藏商品！',\n        showConfirmButton: false,\n        timer: 1800\n      })\n      localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      emitter.emit('add-favorite')\n    }\n  },\n  mounted() {\n    this.getProducts()\n  }\n}\n</script>\n\n<style scoped>\n.cart-img {\n  height: 150px;\n  width: 50%;\n  object-fit: cover;\n}\n\n.table-cus {\n  background-color: #ffffff;\n  box-shadow: 2px 2px 10px 1px #eae7e7;\n}\n\n.pointer {\n  cursor: pointer;\n}\n</style>\n","import { render } from \"./FavoritePage.vue?vue&type=template&id=3167465a&scoped=true\"\nimport script from \"./FavoritePage.vue?vue&type=script&lang=js\"\nexport * from \"./FavoritePage.vue?vue&type=script&lang=js\"\n\nimport \"./FavoritePage.vue?vue&type=style&index=0&id=3167465a&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/luoxiaoyin/Desktop/other/front end/Vue3 課程/homework/第八週作業/AheadShop/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3167465a\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","type","ref","scope","_hoisted_20","_createElementBlock","_hoisted_3","$options","length","_hoisted_5","_createVNode","_component_router_link","to","_hoisted_6","_hoisted_9","_Fragment","_renderList","favorite","key","id","onClick","src","imageUrl","alt","title","_toDisplayString","price","origin_price","_hoisted_15","_hoisted_17","data","products","computed","filterFavorite","this","filter","item","includes","methods","getFavorite","JSON","parse","localStorage","getItem","emitter","getProducts","url","$http","get","then","res","catch","err","alert","response","addToCart","qty","product_id","post","$swal","fire","icon","text","showConfirmButton","timer","message","deleteFavorite","splice","indexOf","setItem","stringify","mounted","__exports__","render"],"sourceRoot":""}