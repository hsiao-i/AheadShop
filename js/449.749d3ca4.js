"use strict";(self["webpackChunkAheadShop"]=self["webpackChunkAheadShop"]||[]).push([[449],{4220:function(t,e,a){a.d(e,{Z:function(){return _}});var i=a(6252),s=a(3577),o=a(9963);const n={"aria-label":"Page navigation example mb-5"},r={class:"pagination"},c=(0,i._)("span",{"aria-hidden":"true"},"«",-1),l=[c],g=["onClick"],d=(0,i._)("span",{"aria-hidden":"true"},"»",-1),p=[d];function u(t,e,a,c,d,u){return(0,i.wg)(),(0,i.iD)("nav",n,[(0,i._)("ul",r,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,i._)("a",{class:"page-link text-primary",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>u.changePage(a.pages.current_page-1)),["prevent"]))},l)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["page-item",{active:a.pages.current_page===t}]),key:t+"1"},[(0,i._)("a",{class:"page-link text-danger",href:"#",onClick:(0,o.iM)((e=>u.changePage(t)),["prevent"])},(0,s.zw)(t),9,g)],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,i._)("a",{class:"page-link text-primary",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>u.changePage(a.pages.current_page+1)),["prevent"]))},p)],2)])])}var h={props:["pages"],methods:{changePage(t){this.$emit("change-page",t)}}},m=a(3744);const v=(0,m.Z)(h,[["render",u]]);var _=v},9449:function(t,e,a){a.r(e),a.d(e,{default:function(){return Y}});var i=a(6252),s=a(3577);const o={class:"container mt-5"},n={class:"row row-sm justify-content-center"},r={class:"col-sm-3"},c=(0,i._)("h5",{class:"h5"},"產品類別 Category ❉",-1),l={class:"mt-3 category list-unstyled d-flex d-sm-block justify-content-around"},g={class:"mb-3"},d=(0,i._)("span",null,"全部商品",-1),p=[d],u={class:"mb-3"},h={class:"mb-3"},m={class:"mb-3"},v={class:"mb-3"},_={class:"col-sm-9"},f={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5 h-100"},k={class:"card-cus h-100 position-relative"},w={class:"hidden-img"},C={class:"card-content"},b={class:"d-flex pt-3 px-4 justify-content-between align-items-start"},y={class:"fs-5-5"},x={key:0},$={key:1,class:"text-danger"},P=(0,i._)("br",null,null,-1),D={class:"text-secondary fs-7"},L={class:"text-end"},z=["onClick"],N=["onClick"],S=["onClick"],Z=(0,i._)("i",{class:"bi bi-cart3 fs-5 me-1"},null,-1),T=(0,i.Uk)(" 加入購物車 "),j=[Z,T],B={key:0},I={class:"w-25 mx-auto"};function F(t,e,a,d,Z,T){const F=(0,i.up)("LoadingOverlay"),H=(0,i.up)("router-link"),M=(0,i.up)("PaginationCom");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(F,{active:Z.isLoading,"z-indes":1e3},null,8,["active"]),(0,i._)("div",o,[(0,i._)("div",n,[(0,i._)("div",r,[c,(0,i._)("ul",l,[(0,i._)("li",g,[(0,i._)("a",{class:"text-decoration-none pointer d-block",onClick:e[0]||(e[0]=t=>T.getCategory(""))},p)]),(0,i._)("li",u,[(0,i._)("a",{class:"text-decoration-none pointer d-block",onClick:e[1]||(e[1]=t=>T.getCategory("項鍊"))},"項鍊")]),(0,i._)("li",h,[(0,i._)("a",{to:"",class:"text-decoration-none pointer d-block",onClick:e[2]||(e[2]=t=>T.getCategory("戒指"))},"戒指")]),(0,i._)("li",m,[(0,i._)("a",{to:"",class:"text-decoration-none pointer d-block",onClick:e[3]||(e[3]=t=>T.getCategory("耳環"))},"耳環")]),(0,i._)("li",v,[(0,i._)("a",{to:"",class:"text-decoration-none pointer d-block",onClick:e[4]||(e[4]=t=>T.getCategory("手鍊"))},"手鍊")])])]),(0,i._)("div",_,[(0,i._)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",k,[(0,i._)("div",w,[(0,i._)("div",{class:"card-img",style:(0,s.j5)({backgroundImage:`url(${t.imageUrl})`})},[(0,i.Wm)(H,{to:`/product/${t.id}`,class:"router-link"},null,8,["to"])],4)]),(0,i._)("div",C,[(0,i._)("div",b,[(0,i._)("div",null,[(0,i._)("h6",y,(0,s.zw)(t.title),1),t.price===t.origin_price?((0,i.wg)(),(0,i.iD)("p",x," NT$ "+(0,s.zw)(t.price),1)):((0,i.wg)(),(0,i.iD)("p",$,[(0,i.Uk)(" NT$ "+(0,s.zw)(t.price)+" ",1),P,(0,i._)("del",D,"NT$ "+(0,s.zw)(t.origin_price),1)]))]),(0,i._)("div",L,[Z.favorite.includes(t.id)?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"bi bi-heart-fill fs-5 text-danger pointer",onClick:e=>T.toggleFavorite(t.id)},null,8,z)):((0,i.wg)(),(0,i.iD)("i",{key:1,class:"bi bi-heart fs-5 pointer",onClick:e=>T.toggleFavorite(t.id)},null,8,N))])]),(0,i._)("button",{type:"button",class:"btn btn-danger w-100 card-btn fs-5-5",onClick:e=>T.addToCart(t.id)},j,8,S)])])])))),128))]),Z.favorite.includes(Z.products.id)?((0,i.wg)(),(0,i.iD)("span",B)):(0,i.kq)("",!0)])]),(0,i._)("div",I,[(0,i.Wm)(M,{pages:Z.pagination,onChangePage:T.getProducts,class:"mt-5"},null,8,["pages","onChangePage"])])])],64)}var H=a(4220),M=a(4902),O={components:{PaginationCom:H.Z},data(){return{isLoading:!1,products:[],pagination:{},product:{},cartData:[],currentPage:1,nowCategory:"",favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{getProducts(t=1){this.isLoading=!0,this.currentPage=t;const e=`https://vue3-course-api.hexschool.io/v2/api/hsiaoi/products?page=${t}`;this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{this.$swal.fire({icon:"warning",text:t.response.message,showConfirmButton:!1,timer:1800}),this.isLoading=!1}))},getCategory(t,e=1){const a=`https://vue3-course-api.hexschool.io/v2/api/hsiaoi/products?category=${t}&page=${e}`;this.$http.get(a).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1}))},addToCart(t,e=1){const a="https://vue3-course-api.hexschool.io/v2/api/hsiaoi/cart",i={product_id:t,qty:e};this.$http.post(a,{data:i}).then((t=>{this.product=t.data,M.Z.emit("get-cart"),this.$swal.fire({icon:"success",text:"成功加入購物車 ✿",showConfirmButton:!1,timer:1800})})).catch((t=>{this.$swal.fire({icon:"warning",text:t.response.data.message,showConfirmButton:!1,timer:1800})}))},toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.$swal.fire({icon:"success",text:"將此商品加入收藏 ♥",showConfirmButton:!1,timer:1800})):this.favorite.splice(e,1)}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite)),M.Z.emit("add-favorite")},deep:!0}},mounted(){this.getProducts()}},U=a(3744);const W=(0,U.Z)(O,[["render",F]]);var Y=W}}]);
//# sourceMappingURL=449.749d3ca4.js.map