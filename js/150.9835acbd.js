"use strict";(self["webpackChunkAheadShop"]=self["webpackChunkAheadShop"]||[]).push([[150],{1150:function(t,e,l){l.r(e),l.d(e,{default:function(){return rt}});var d=l(6252),r=l(3577),s=l(9963);const a=(0,d._)("h3",null,"訂單列表",-1),o={class:"table"},n=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",{scope:"col"},"購買時間"),(0,d._)("th",{scope:"col"},"Email"),(0,d._)("th",{scope:"col"},"購買品項"),(0,d._)("th",{scope:"col"},"應付金額"),(0,d._)("th",{scope:"col"},"是否付款"),(0,d._)("th",{scope:"col"},"編輯")])],-1),i={class:"form-check form-switch"},u=["onUpdate:modelValue","id"],c=["for"],p={key:0},_={key:1},h={class:"btn-group",role:"group","aria-label":"Basic outlined example"},m=["onClick"],b=(0,d._)("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",-1);function w(t,e,l,w,O,g){const f=(0,d.up)("LoadingOverlay"),y=(0,d.up)("OrderModal");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(f,{active:O.isLoading,"z-index":1e3},null,8,["active"]),a,(0,d._)("table",o,[n,(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(O.orders,((e,l)=>((0,d.wg)(),(0,d.iD)("tr",{key:l},[(0,d._)("td",null,(0,r.zw)(t.$filters.date(e.create_at)),1),(0,d._)("td",null,(0,r.zw)(e.user.email),1),(0,d._)("td",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(e.products,((t,e)=>((0,d.wg)(),(0,d.iD)("ul",{class:"list-unstyled",key:e},[(0,d._)("li",null,(0,r.zw)(t.product.title)+"，數量："+(0,r.zw)(t.qty),1)])))),128))]),(0,d._)("td",null,(0,r.zw)(t.$filters.toThousandths(e.total)),1),(0,d._)("td",null,[(0,d._)("div",i,[(0,d.wy)((0,d._)("input",{"onUpdate:modelValue":t=>e.is_paid=t,class:"form-check-input",type:"checkbox",role:"switch",id:`paidState${e.id}`},null,8,u),[[s.e8,e.is_paid]]),(0,d._)("label",{class:"form-check-label",for:`paidState${e.id}`},[e.is_paid?((0,d.wg)(),(0,d.iD)("span",p,"已付款")):((0,d.wg)(),(0,d.iD)("span",_,"未付款"))],8,c)])]),(0,d._)("td",null,[(0,d._)("div",h,[(0,d._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>g.openOrderModal(e)}," 檢視 ",8,m),b])])])))),128))])]),(0,d.Wm)(y,{ref:"orderModal",order:O.tempOrder,onUpdateOrder:g.updateOrder},null,8,["order","onUpdateOrder"])],64)}const O={class:"modal",tabindex:"-1",ref:"productModal"},g={class:"modal-dialog"},f={class:"modal-content"},y=(0,d._)("div",{class:"modal-header"},[(0,d._)("h5",{class:"modal-title"},"訂單細節"),(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},v={class:"row"},z={class:"col-md-4"},D=(0,d._)("h4",null,"用戶資料",-1),$={class:"table"},x={key:0},M=(0,d._)("th",null,"姓名",-1),L=(0,d._)("th",null,"Email",-1),C=(0,d._)("th",null,"電話",-1),U=(0,d._)("th",null,"地址",-1),H={class:"col-md-8"},S=(0,d._)("h4",null,"訂單細節",-1),Y={class:"table"},K=(0,d._)("th",null,"訂單編號",-1),V=(0,d._)("th",null,"下單時間",-1),Z=(0,d._)("th",null,"付款時間",-1),q=(0,d._)("th",null,"付款狀態",-1),A={key:0,class:"text-success"},E={key:1,class:"text-muted"},T=(0,d._)("th",null,"總金額",-1),W=(0,d._)("h4",null,"選購商品",-1),j={class:"table"},B={class:"form-check"},F={class:"form-check-label",for:"flexCheckDefault"},G={key:0},I={key:1},J={class:"modal-footer"},N=(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function P(t,e,l,a,o,n){return(0,d.wg)(),(0,d.iD)("div",O,[(0,d._)("div",g,[(0,d._)("div",f,[y,(0,d._)("div",k,[(0,d._)("div",v,[(0,d._)("div",z,[D,(0,d._)("table",$,[o.tempOrder.user?((0,d.wg)(),(0,d.iD)("tbody",x,[(0,d._)("tr",null,[M,(0,d._)("td",null,(0,r.zw)(o.tempOrder.user.name),1)]),(0,d._)("tr",null,[L,(0,d._)("td",null,(0,r.zw)(o.tempOrder.user.email),1)]),(0,d._)("tr",null,[C,(0,d._)("td",null,(0,r.zw)(o.tempOrder.user.tel),1)]),(0,d._)("tr",null,[U,(0,d._)("td",null,(0,r.zw)(o.tempOrder.user.address),1)])])):(0,d.kq)("",!0)])]),(0,d._)("div",H,[S,(0,d._)("table",Y,[(0,d._)("tbody",null,[(0,d._)("tr",null,[K,(0,d._)("td",null,(0,r.zw)(o.tempOrder.id),1)]),(0,d._)("tr",null,[V,(0,d._)("td",null,(0,r.zw)(t.$filters.date(o.tempOrder.create_at)),1)]),(0,d._)("tr",null,[Z,(0,d._)("td",null,(0,r.zw)(t.$filters.date(o.tempOrder.paid_date)),1)]),(0,d._)("tr",null,[q,(0,d._)("td",null,[o.tempOrder.is_paid?((0,d.wg)(),(0,d.iD)("strong",A,"已付款")):((0,d.wg)(),(0,d.iD)("span",E,"尚未付款"))])]),(0,d._)("tr",null,[T,(0,d._)("td",null,(0,r.zw)(t.$filters.toThousandths(o.tempOrder.total)),1)])])]),W,(0,d._)("table",j,[(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(o.tempOrder.products,((t,e)=>((0,d.wg)(),(0,d.iD)("tr",{key:e+123},[(0,d._)("td",null,(0,r.zw)(t.product.title),1),(0,d._)("td",null,(0,r.zw)(t.product.num)+" / "+(0,r.zw)(t.product.unit),1),(0,d._)("td",null,(0,r.zw)(t.total),1)])))),128))])]),(0,d._)("div",B,[(0,d.wy)((0,d._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=t=>o.tempOrder.is_paid=t)},null,512),[[s.e8,o.tempOrder.is_paid]]),(0,d._)("label",F,[o.tempOrder.is_paid?((0,d.wg)(),(0,d.iD)("span",G,"已付款")):((0,d.wg)(),(0,d.iD)("span",I,"未付款"))])])])])]),(0,d._)("div",J,[N,(0,d._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>n.emitUpdateOrder&&n.emitUpdateOrder(...t))}," 修改付款狀態 ")])])])],512)}var Q=l(2703),R={mixins:[Q.Z],props:{order:{type:Object,default(){return{}}}},data(){return{tempOrder:{}}},methods:{emitUpdateOrder(){this.$emit("update-order",this.tempOrder)}},watch:{order(){this.tempOrder=this.order}}},X=l(3744);const tt=(0,X.Z)(R,[["render",P]]);var et=tt,lt={components:{OrderModal:et},data(){return{orders:{},tempOrder:{},isLoading:!1}},methods:{getOrders(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/hsiaoi/admin/orders";this.$http.get(t).then((t=>{this.orders=t.data.orders,this.isLoading=!1})).catch((t=>{alert(t.response.data),this.isLoading=!1}))},openOrderModal(t){this.tempOrder={...t};const e=this.$refs.orderModal;e.openModal()},updateOrder(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/v2/api/hsiaoi/admin/order/${this.tempOrder.id}`,l={is_paid:t.is_paid};this.$http.put(e,{data:l}).then((t=>{alert(t.data.message),this.getOrders(),this.isLoading=!1;const e=this.$refs.orderModal;e.closeModal()})).catch((t=>{alert(t.response.data.message),this.isLoading=!1}))}},mounted(){this.getOrders()}};const dt=(0,X.Z)(lt,[["render",w]]);var rt=dt}}]);
//# sourceMappingURL=150.9835acbd.js.map